%==========================
% main.tex  —  Book scaffold
%==========================
\documentclass[11pt,oneside]{book}

%---- Layout & fonts
\usepackage[margin=1.1in]{geometry}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{microtype}
\setlength{\parskip}{0.5\baselineskip}
\setlength{\parindent}{0pt}

%---- Math & tables
\usepackage{amsmath,amssymb,mathtools}
\usepackage{booktabs}

%---- Figures & colors
\usepackage{graphicx,xcolor}

%---- Custom environments (MUST come early, before hyperref)
\usepackage[most]{tcolorbox}

\newtcolorbox{keyinsight}{
  colback=blue!5!white,
  colframe=blue!75!black,
  title=Key Insight,
  fonttitle=\bfseries,
  breakable
}

\newtcolorbox{examplebox}{
  colback=green!5!white,
  colframe=green!50!black,
  title=Worked Example,
  fonttitle=\bfseries,
  breakable
}

\newtcolorbox{pausebox}{
  colback=orange!5!white,
  colframe=orange!75!black,
  fonttitle=\bfseries,
  breakable
}

\newenvironment{geometrylens}{%
  \begin{quote}\small\noindent\textbf{Geometry Lens.}\ 
}{%
  \end{quote}
}

%---- Utilities
\usepackage{etoolbox}

%---- Helper for missing files
\newcommand{\maybeinput}[1]{%
  \IfFileExists{#1.tex}{%
    \input{#1}%
  }{%
    \typeout{*** Warning: Missing file #1.tex ***}%
  }%
}

%---- Hyperlinks & refs (AFTER tcolorbox, BEFORE polyglossia)
\usepackage[hidelinks]{hyperref}
\usepackage[nameinlink]{cleveref}

%---- Polyglossia for Arabic (LAST!)
\usepackage{polyglossia}
\setmainlanguage{english}
\setotherlanguage{arabic}
\newfontfamily\arabicfont[Script=Arabic]{Amiri}

%==========================
% Front matter
%==========================
\title{Information Geometry for GenAI: From Bayesian Foundations to Production Systems}
\author{Hassana Labs}
\date{\today}

\begin{document}

\maketitle

\input{frontmatter/dedication}

\tableofcontents

\input{frontmatter/contributors}

\mainmatter

%======================================================
% PART I — Foundations: Information, Bayes, and Geometry
%======================================================
\part{Foundations: Information, Bayes, and Geometry}

% Chapter 1: Information as Compression
\include{chapters/part1/ch01_information_compression}

% Chapter 2: Bayesian Predictive Inference
\maybeinput{chapters/part1/ch02_bayesian_predictive}

% Chapter 3: The Geometry of Probability
\maybeinput{chapters/part1/ch03_geometry_probability}

% Chapter 4: High-Dimensional Representations
\maybeinput{chapters/part1/ch04_highdim_representations}

%======================================================
% PART II — Models Through the Information-Geometric Lens
%======================================================
\part{Models Through the Information-Geometric Lens}

\maybeinput{chapters/part2/ch05_transformers_compressors}
\maybeinput{chapters/part2/ch06_order_exchangeability}
\maybeinput{chapters/part2/ch07_diffusion_score}
\maybeinput{chapters/part2/ch08_variational_flows}

%======================================================
% PART III — Learning & Generalization
%======================================================
\part{Learning \& Generalization: Scaling, Data, and Optimization}

\maybeinput{chapters/part3/ch09_pacbayes_mdl}
\maybeinput{chapters/part3/ch10_scaling_laws}
\maybeinput{chapters/part3/ch11_optimization_geometry}

%======================================================
% PART IV — Evaluation, Calibration, and Information Budgeting
%======================================================
\part{Evaluation, Calibration, and Information Budgeting}

\maybeinput{chapters/part4/ch12_uncertainty}
\maybeinput{chapters/part4/ch13_calibration_selective}
\maybeinput{chapters/part4/ch14_information_budgeting}
\maybeinput{chapters/part4/ch15_evaluation_theory}

%======================================================
% PART V — Systems: Retrieval, Tool Use, and Structured Generation
%======================================================
\part{Systems: Retrieval, Tool Use, and Structured Generation}

\maybeinput{chapters/part5/ch16_retrieval_acquisition}
\maybeinput{chapters/part5/ch17_tool_use_programs}
\maybeinput{chapters/part5/ch18_structured_outputs}
\maybeinput{chapters/part5/ch19_ethics_safety}

%======================================================
% PART VI — Case Studies, Labs, and Patterns
%======================================================
\part{Case Studies, Labs, and Patterns}

\maybeinput{chapters/part6/ch20_selfconsistency_audits}
\maybeinput{chapters/part6/ch21_dose_response}
\maybeinput{chapters/part6/ch22_audit_playbook}
\maybeinput{chapters/part6/ch23_data_curation}
\maybeinput{chapters/part6/ch24_putting_together}

%======================================================
% Back Matter
%======================================================
\backmatter

\maybeinput{backmatter/appendices}
\maybeinput{backmatter/bibliography}
\maybeinput{backmatter/index}

\end{document}